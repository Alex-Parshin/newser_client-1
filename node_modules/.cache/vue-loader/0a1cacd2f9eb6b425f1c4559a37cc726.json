{"remainingRequest":"/home/hramov/Documents/Projects/newser_client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hramov/Documents/Projects/newser_client/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hramov/Documents/Projects/newser_client/src/App.vue","mtime":1605101701871},{"path":"/home/hramov/Documents/Projects/newser_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hramov/Documents/Projects/newser_client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hramov/Documents/Projects/newser_client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hramov/Documents/Projects/newser_client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHZ1ZUpzb25FZGl0b3IgZnJvbSAndnVlLWpzb24tZWRpdG9yJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcCIsCiAgY29tcG9uZW50czogewogICAgICAgIHZ1ZUpzb25FZGl0b3IKICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RW5naW5lc0FjdCgpCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNsaWVudDogJycsCiAgICAgIGNsaWVudF9uYW1lOiAnJywKICAgICAgcHVwcGV0ZWVyOiBmYWxzZSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcGFnZXM6IDEsCiAgICAgIHNvdXJjZXM6IFsi0KPQtNCw0LvQtdC90L3Ri9C5INGB0LXRgNCy0LXRgCIsICLQm9C+0LrQsNC70YzQvdC+0LUg0YXRgNCw0L3QuNC70LjRidC1INC30LDQv9GA0L7RgdC+0LIiXSwKICAgICAgc291cmNlOiAi0KPQtNCw0LvQtdC90L3Ri9C5INGB0LXRgNCy0LXRgCIsCiAgICAgIGVuZ2luZXM6IFtmYWxzZSwgZmFsc2UsIGZhbHNlXSwKICAgICAgc2hlZXQ6IGZhbHNlLAogICAgICBsb2dzOltdLAogICAgICBzaGVldENvbmZpZzpmYWxzZSwKICAgICAgY2hlY2tDbGllbnQ6IGZhbHNlLAogICAgICBqc29uOiB7CiAgICAgICAgImhlbGxvIjogInZ1ZSIKICAgICAgfSwKICAgICAgY29uZmlnOiAnJwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJnZXRDbGllbnRzIiwgImdldEVuZ2luZXMiLCJnZXRDb25maWciXSksCiAgICBnZXRDb25maWc6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb25maWcKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5jb25maWcgPSB2YWx1ZQogICAgICB9CiAgICB9CiAgfSwKICBzb2NrZXRzOiB7CiAgICBjb25uZWN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMud2hvYW1pKCk7CiAgICAgIHRoaXMuZ2V0U3RhdHVzKCkKICAgIH0sCiAgICB1cGRhdGVfY2xpZW50czogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdGhpcy5nZXRDbGllbnRzQWN0KGRhdGEpOwogICAgfSwKICAgIGxvZzogZnVuY3Rpb24gKHsgbWVtYmVyLCB0ZXh0LCBzdGF0dXMgfSkgewogICAgICB0aGlzLmdldENsaWVudHMubWFwKChjbGllbnQpID0+IHsKICAgICAgICBpZiAoY2xpZW50Lm5hbWUgPT09IG1lbWJlcikKICAgICAgICAgIGNsaWVudC5zdGF0dXMgPSBOdW1iZXIoc3RhdHVzKQogICAgICAgICAgY2xpZW50LmxvZ3MudW5zaGlmdCh0ZXh0KQogICAgICB9KQogICAgfSwKICAgIGdldFN0YXR1c1RvQ2xpZW50OiBmdW5jdGlvbih7IG1lbWJlciwgc3RhdHVzIH0pIHsKICAgICAgdGhpcy5nZXRDbGllbnRzLm1hcCgoY2xpZW50KSA9PiB7CiAgICAgICAgaWYgKGNsaWVudC5uYW1lID09PSBtZW1iZXIpCiAgICAgICAgICBjbGllbnQuc3RhdHVzID0gTnVtYmVyKHN0YXR1cykKICAgICAgfSkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJjbGllbnRzQWN0IiwgImVuZ2luZXNBY3QiLCJjb25maWdBY3QiLCAic2VuZENvbmZpZ0FjdCJdKSwKICAgIHNldENsaWVudChjbGllbnQpIHsKICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQKICAgICAgdGhpcy5jbGllbnRfbmFtZSA9IGNsaWVudC5uYW1lCiAgICAgIHRoaXMucHVwcGV0ZWVyID0gdGhpcy5jbGllbnRfbmFtZSA/IHRoaXMuY2xpZW50X25hbWUuc3BsaXQoJ18nKVswXSA9PT0gJ3B1cHBldGVlcicgOiBmYWxzZSwKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICB9LAogICAgb25Kc29uU2F2ZSh2YWx1ZSkgewogICAgICBjb25zb2xlLmxvZyh0eXBlb2YodmFsdWUpKQogICAgICAvLyBpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ0FycmF5JykgewogICAgICAvLyAgIGNvbnNvbGUubG9nKHZhbHVlKQogICAgICAvLyAgIHRoaXMuc2VuZENvbmZpZ0FjdCh2YWx1ZSkKICAgICAgLy8gfQogICAgICBlbHNlIHRoaXMuc2hlZXRDb25maWcgPSBmYWxzZQogICAgfSwKICAgIGdldENsaWVudHNBY3QoZGF0YSkgewogICAgICB0aGlzLmNsaWVudHNBY3QoZGF0YSk7CiAgICB9LAogICAgYXN5bmMgZ2V0RW5naW5lc0FjdCgpIHsKICAgICAgYXdhaXQgdGhpcy5lbmdpbmVzQWN0KCkKICAgIH0sCiAgICBhc3luYyBnZXRDb25maWdBY3QoKXsKICAgICAgYXdhaXQgdGhpcy5jb25maWdBY3QoKQogICAgfSwKICAgIGdldFN0YXR1cygpIHsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoJ2dldFN0YXR1cycpCiAgICB9LAoKICAgIC8qKiAgICAgICAgICAgICAgIFNvY2tldCBNZXRob2RzICAgICAgICAgICAgICAgICAgKi8KICAgIHdob2FtaSgpIHsKICAgICAgdGhpcy4kc29ja2V0LmVtaXQoIndob19hbV9pIiwgIm5ld3Nlcl9jbGllbnQiKTsKICAgIH0sCiAgICBzdGFydCgpIHsKICAgICAgbGV0IHF1ZXJ5RGF0YSA9IHt9CiAgICAgIHF1ZXJ5RGF0YS5zb3VyY2UgPSB0aGlzLnNvdXJjZQogICAgICBxdWVyeURhdGEucGFnZXMgPSB0aGlzLnBhZ2VzCiAgICAgIHF1ZXJ5RGF0YS5lbmdpbmVzID0gdGhpcy5lbmdpbmVzCgogICAgICB0aGlzLiRzb2NrZXQuZW1pdCgic3RhcnQiLCB0aGlzLmNsaWVudCwgcXVlcnlEYXRhKSAKICAgIH0sCiAgICBzdG9wKGNsaWVudCkgewogICAgICBpZiAodGhpcy4kc29ja2V0LmVtaXQoInN0b3AiLCBjbGllbnQpKSBjbGllbnQuc3RhdHVzID0gImlkbGUiOwogICAgfSwKICAgIHJlc3RhcnQoY2xpZW50KSB7CiAgICAgIHRoaXMuJHNvY2tldC5lbWl0KCJyZXN0YXJ0IiwgY2xpZW50KTsKICAgIH0sCiAgICB2aWV3TG9ncyhuYW1lKXsKICAgICAgY29uc29sZS5sb2cobmFtZSk7CiAgICAgIHRoaXMubG9ncyA9IHRoaXMuZ2V0Q2xpZW50czsKICAgICAgY29uc29sZS5sb2codGhpcy5sb2dzKTsKICAgICAgdGhpcy5zaG93TG9nc1dpbmRvdyA9IHRydWUKICAgIH0sCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCiAgfQp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <v-card color=\"grey lighten-4\" flat tile>\n      <v-toolbar dense>\n        <v-toolbar-title @click=\"$router.push('/')\" style=\"cursor: pointer\"\n          >Панель управления системой Newser</v-toolbar-title\n        >\n        <v-spacer></v-spacer>\n      </v-toolbar>\n      <!-- <router-view /> -->\n\n      <v-simple-table style=\"padding: 10px\">\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th class=\"text-left\">Клиент</th>\n              <th class=\"text-left\">Время подключения</th>\n              <th class=\"text-left\">Действия</th>\n              <th class=\"text-left\">Конфиг</th>\n              <th class=\"text-left\">Логи</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in getClients\" :key=\"item.name\">\n              <td>{{ item.name }}</td>\n              <td>{{ item.time }}</td>\n              <td>\n                <div style=\"margin-top: 5px\">\n\n                  <v-btn\n                    v-if=\"item.status === 0 && item.name.split('_')[0] === 'puppeteer'\"\n                    style=\"margin-right: 10px\"\n                    outlined\n                    small\n                    color=\"green\"\n                    @click=\"setClient(item)\"\n                    ><v-icon>mdi-play</v-icon>\n                  </v-btn\n                  >\n\n                  <v-btn\n                    v-if=\"item.status === 0 && item.name.split('_')[0] !== 'puppeteer'\"\n                    style=\"margin-right: 10px\"\n                    outlined\n                    small\n                    color=\"green\"\n                    @click=\"dialog = false; client = item; start(item)\"\n                    ><v-icon>mdi-play</v-icon>\n                  </v-btn\n                  >\n\n                  <v-btn\n                    v-if=\"item.status === 1\"\n                    style=\"margin-right: 10px\"\n                    outlined\n                    small\n                    color=\"red\"\n                    @click=\"stop(item)\"\n                    ><v-icon>mdi-stop</v-icon>\n                  </v-btn>\n                  <v-btn outlined small color=\"black\" @click=\"restart(item)\"\n                    ><v-icon>mdi-sync</v-icon>\n                  </v-btn>\n                </div>\n              </td>\n              <td style=\"cursor:pointer\" @click=\"client=item; sheetConfig=true; checkClient=true; getConfigAct()\">Изменить</td>\n              <td style=\"cursor:pointer;\" @click=\"client=item; sheet=true\" >Смотреть</td>\n            </tr>\n          </tbody>\n          \n\n        </template>\n      </v-simple-table>\n    </v-card>\n    <div class=\"text-center\">\n    <v-bottom-sheet\n      v-model=\"sheet\"\n      persistent\n    >\n      \n      <v-sheet\n        class=\"text-center logs_block\"\n        \n      >\n        <v-btn\n          class=\"mt-3 closeBtn\"\n          color=\"error\"\n          @click=\"sheet = !sheet\"\n        >\n            &#10006;\n        </v-btn>\n        <v-spacer></v-spacer>\n        <span class=\"nameLogs\">Логи {{client.name}}</span>\n\n          <ul class=\"logs\">\n            <li v-for=\"(log,i) in client.logs\" :key=\"i\">{{log}}</li>\n          </ul>\n      </v-sheet>\n    </v-bottom-sheet>\n\n    <div class=\"text-center\">\n    <v-bottom-sheet\n      v-model=\"sheetConfig\"\n      persistent\n    >\n\n      <v-sheet\n      v-if=\"checkClient\"\n        class=\"text-center logs_block\"\n        \n      >\n        <v-btn\n          class=\"mt-3 closeBtn\"\n          color=\"error\"\n          @click=\"sheetConfig = !sheetConfig\"\n        >\n            &#10006;\n        </v-btn>\n        <v-spacer></v-spacer>\n        <span class=\"nameLogs\">Конфигурация {{client.name}}</span>\n        <div class=\"both\"></div>\n        <div class=\"config\">\n          <vue-json-editor  :show-btns=\"true\" @json-save=\"onJsonSave\" v-if=\"client.name.split('_')[0]==='puppeteer'\" v-model=\"getConfig\"/>\n          <!-- <vue-json-editor  v-if=\"client.name.split('_')[0]==='mercury'\" v-model=\"json\"/> -->\n        </div>\n      </v-sheet>\n    </v-bottom-sheet>\n  </div>\n  </div>\n\n    <v-row justify=\"center\" v-if=\"puppeteer\">\n      <v-dialog\n        v-model=\"dialog\"\n        fullscreen\n        hide-overlay\n        transition=\"dialog-bottom-transition\"\n      >\n        <v-card>\n          <v-toolbar dark color=\"primary\">\n            <v-btn icon dark @click=\"dialog = false\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n            <v-toolbar-title>Настройки запуска</v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-toolbar-items>\n              <v-btn dark text @click=\"dialog = false; start()\"> Запуск </v-btn>\n            </v-toolbar-items>\n          </v-toolbar>\n          <v-list three-line subheader>\n            <v-subheader>{{ client_name }}</v-subheader>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Источник запросов</v-list-item-title>\n                <v-select v-model=\"source\" :items=\"sources\"></v-select>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Глубина поиска (в страницах)</v-list-item-title>\n                <v-text-field type=\"number\" v-model=\"pages\"></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list>\n          <v-divider></v-divider>\n          <v-list three-line subheader>\n            <v-subheader>Поисковые системы</v-subheader>\n            <v-list-item v-for=\"(item, index) in getEngines\" :key=\"index\">\n              <v-list-item-action>\n                <v-checkbox v-model=\"engines[index]\"></v-checkbox>\n              </v-list-item-action>\n              <v-list-item-content>\n                <v-list-item-title>{{ item }}</v-list-item-title>\n                <v-list-item-subtitle\n                  >Добавить поисковую систему {{ item }} в поиск</v-list-item-subtitle>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </v-app>\n</template>\n\n\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport vueJsonEditor from 'vue-json-editor'\nexport default {\n  name: \"App\",\n  components: {\n        vueJsonEditor\n    },\n\n    mounted() {\n    this.getEnginesAct()\n  },\n\n  data() {\n    return {\n      client: '',\n      client_name: '',\n      puppeteer: false,\n      dialog: false,\n      pages: 1,\n      sources: [\"Удаленный сервер\", \"Локальное хранилище запросов\"],\n      source: \"Удаленный сервер\",\n      engines: [false, false, false],\n      sheet: false,\n      logs:[],\n      sheetConfig:false,\n      checkClient: false,\n      json: {\n        \"hello\": \"vue\"\n      },\n      config: ''\n    }\n  },\n  computed: {\n    ...mapGetters([\"getClients\", \"getEngines\",\"getConfig\"]),\n    getConfig: {\n      get() {\n        return this.$store.state.config\n      },\n      set(value) {\n        this.config = value\n      }\n    }\n  },\n  sockets: {\n    connect: function () {\n      this.whoami();\n      this.getStatus()\n    },\n    update_clients: function (data) {\n      this.getClientsAct(data);\n    },\n    log: function ({ member, text, status }) {\n      this.getClients.map((client) => {\n        if (client.name === member)\n          client.status = Number(status)\n          client.logs.unshift(text)\n      })\n    },\n    getStatusToClient: function({ member, status }) {\n      this.getClients.map((client) => {\n        if (client.name === member)\n          client.status = Number(status)\n      })\n    }\n  },\n  methods: {\n    ...mapActions([\"clientsAct\", \"enginesAct\",\"configAct\", \"sendConfigAct\"]),\n    setClient(client) {\n      this.client = client\n      this.client_name = client.name\n      this.puppeteer = this.client_name ? this.client_name.split('_')[0] === 'puppeteer' : false,\n      this.dialog = true\n    },\n    onJsonSave(value) {\n      console.log(typeof(value))\n      // if (typeof(value) === 'Array') {\n      //   console.log(value)\n      //   this.sendConfigAct(value)\n      // }\n      else this.sheetConfig = false\n    },\n    getClientsAct(data) {\n      this.clientsAct(data);\n    },\n    async getEnginesAct() {\n      await this.enginesAct()\n    },\n    async getConfigAct(){\n      await this.configAct()\n    },\n    getStatus() {\n      this.$socket.emit('getStatus')\n    },\n\n    /**               Socket Methods                  */\n    whoami() {\n      this.$socket.emit(\"who_am_i\", \"newser_client\");\n    },\n    start() {\n      let queryData = {}\n      queryData.source = this.source\n      queryData.pages = this.pages\n      queryData.engines = this.engines\n\n      this.$socket.emit(\"start\", this.client, queryData) \n    },\n    stop(client) {\n      if (this.$socket.emit(\"stop\", client)) client.status = \"idle\";\n    },\n    restart(client) {\n      this.$socket.emit(\"restart\", client);\n    },\n    viewLogs(name){\n      console.log(name);\n      this.logs = this.getClients;\n      console.log(this.logs);\n      this.showLogsWindow = true\n    },\n    /************************************************ */\n  }\n};\n</script>\n\n<style scoped>\n* {\n  font-family: \"Franklin Gothic Medium\", \"Arial Narrow\", Arial, sans-serif;\n}\n  .logs_block{\n    height: 42vh;\n  }\n  .logs{\n    text-align: left;\n    height: 82%;    \n    display:flex;\n    flex-direction:column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    overflow-y: scroll;\n    align-items: flex-start;\n    box-sizing: border-box;\n    padding: 3px 15px;\n    font-size: .9rem;\n    line-height: 1rem;\n    font-weight: 400;\n    width: 100%;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n  }\n  .logs>li{\n    list-style: none;\n  }\n  .btn{\n    width:200px;\n    margin: 25px;\n  }\n  .closeBtn{\n    opacity: 0.7;\n    cursor: pointer;\n    float: right;\n    margin-right: 30px;\n    font-size: 200%;\n  }\n  .nameLogs{\n    margin-top: 10px;\n    margin-bottom: 5px;\n    float: left;   \n    margin-left: 25px;\n    font-size: 20px;\n    padding: 7px;\n    font-style: italic;\n    border-radius: 8px;\n    background: rgba(180,25,12,.3);\n  }\n  .closeLogs>div:active{\n    opacity: 0.9;\n  }\n  .footer{\n    width: 100%;\n  }\n  .main{\n    min-height: 85vh;\n  }\n  .both{\n    clear: both;\n  }\n  .config{\n    height: 82%;\n    overflow-y: scroll;\n  }\n</style>\n"]}]}